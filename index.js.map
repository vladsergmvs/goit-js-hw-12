{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/',\n  API_KEY = '47047492-675b2ed8a2567f743231acd4f';\n\nexport async function getData(searchQuery, page) {\n  try {\n    const { data } = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: 15,\n        page,\n      },\n    });\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export function createMarkup(array) {\n    return array\n      .map(\n        ({\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n       <li class=\"gallery-list-item\">\n     <a class=\"gallery-list-item-link\" href=\"${largeImageURL}\" >\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n    </a>           \n              <ul class=\"gallery-card-list\">\n              <li class=\"gallery-card-list-item\">\n                  <h3>Likes</h3>\n                  <p>\"${likes}\"</p>\n              </li>\n              <li class=\"gallery-card-list-item\">\n                  <h3>Views</h3>\n                  <p>\"${views}\"</p>\n              </li>\n              <li class=\"gallery-card-list-item\">\n                  <h3>Comments</h3>\n                  <p>\"${comments}\"</p>\n              </li>\n              <li class=\"gallery-card-list-item\">\n                  <h3>Downloads</h3>\n                  <p>\"${downloads}\"</p>\n              </li>\n              </ul>\n                  \n  </li>\n    `\n      )\n      .join('');\n  }\n  ","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// //////////////////////////////////\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getData } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\n//////////////////////////////////////////////////////\n\nconst form = document.querySelector('.js-search-form'),\n  galleryList = document.querySelector('.js-gallery-list'),\n  loader = document.querySelector('.loader'),\n  loadMore = document.querySelector('.js-load-more');\n\ndocument.querySelector('.search-input').addEventListener('click', event => {\n  event.target.value = '';\n});\n\n//////////////////////////////////////////////////////\n\nform.addEventListener('submit', handleSubmit);\n\n/////////\nlet page = 1;\nlet searchQuery = null;\n/////////\nasync function handleSubmit(event) {\n  event.preventDefault();\n  loader.classList.add('is-hidden');\n  page = 1;\n  searchQuery = event.target.elements.searchQuery.value.trim();\n  if (searchQuery === '') {\n    loader.classList.remove('is-hidden');\n    return;\n  }\n  try {\n    const response = await getData(searchQuery, page);\n    if (response.hits.length !== 0) {\n      galleryList.innerHTML = createMarkup(response.hits);\n      response.totalHits > 15\n        ? loadMore.classList.add('is-hidden')\n        : loadMore.classList.remove('is-hidden');\n      showGallery();\n    } else {\n      galleryList.innerHTML = '';\n      iziToastMessage(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'red'\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.remove('is-hidden');\n  }\n  form.re;\n  /////////\n}\n////////////////////////////////////////////////\n\nloadMore.addEventListener('click', handleClick);\n\nasync function handleClick(event) {\n  /////\n  page += 1;\n  loader.classList.add('is-hidden');\n\n  try {\n    const response = await getData(searchQuery, page);\n\n    galleryList.insertAdjacentHTML('beforeend', createMarkup(response.hits));\n    const lastPage = Math.ceil(response.totalHits / 15);\n    lastPage === page\n      ? (loadMore.classList.remove('is-hidden'),\n        iziToastMessage(\n          \"We're sorry, but you've reached the end of search results.\",\n          'blue'\n        ))\n      : loadMore.classList.add('is-hidden');\n    showGallery();\n\n    const card = document.querySelector('.gallery-list-item'),\n      cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.remove('is-hidden');\n  }\n  ///\n}\n\n//////////////////////////////////////////////\nfunction showGallery() {\n  let gallery = new SimpleLightbox('.js-gallery-list a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  gallery.refresh();\n}\n///////////////////////////////////////////\nfunction iziToastMessage(message, color) {\n  iziToast.info({\n    message: `${message}`,\n    position: 'topRight',\n    color: `${color}`,\n  });\n}\n/////////////////////////////////\n"],"names":["BASE_URL","API_KEY","getData","searchQuery","page","data","axios","error","createMarkup","array","largeImageURL","webformatURL","tags","likes","views","comments","downloads","form","galleryList","loader","loadMore","event","handleSubmit","response","showGallery","iziToastMessage","handleClick","card","cardHeight","SimpleLightbox","message","color","iziToast"],"mappings":"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"}